<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data → HTML Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .table-wrap { max-height: 60vh; overflow: auto; }
    th.sticky { position: sticky; top: 0; background: white; box-shadow: 0 1px 0 rgba(0,0,0,.08); }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-2xl font-bold mb-4">Data → HTML Converter</h1>

    <!-- Controls -->
    <div class="flex gap-4 mb-4">
      <textarea id="paste" placeholder="Paste data (1 column, one per line)" 
        class="w-full h-40 p-3 rounded-xl shadow bg-white"></textarea>
      <div class="flex flex-col gap-2">
        <label class="text-sm">Split into columns</label>
        <input id="splitCols" type="number" min="1" value="2" 
          class="w-20 px-2 py-1 rounded bg-gray-100" />
        <button id="btnRender" class="px-3 py-2 rounded-lg bg-black text-white">Render</button>
      </div>
    </div>

    <!-- Table Output -->
    <div id="output" class="bg-white rounded-xl shadow p-3 mb-6"></div>

    <!-- HTML Code Output -->
    <div class="bg-white rounded-xl shadow p-3">
      <div class="flex justify-between items-center mb-2">
        <h2 class="font-semibold">Generated HTML Code</h2>
        <button id="copyBtn" class="px-3 py-1 rounded bg-blue-600 text-white text-sm">Copy HTML</button>
      </div>
      <textarea id="htmlCode" readonly class="w-full h-60 p-3 font-mono text-sm bg-gray-100 rounded"></textarea>
    </div>
  </div>

  <script>
    const byId = id => document.getElementById(id);

    function render() {
      const rawText = byId("paste").value.trim();
      if (!rawText) {
        alert("Please paste some data first!");
        return;
      }

      const values = rawText.split(/\r?\n/).map(v => v.trim()).filter(v => v);
      const splitCols = parseInt(byId("splitCols").value, 10) || 1;

      // break values into rows
      let rows = [];
      for (let i = 0; i < values.length; i += splitCols) {
        rows.push(values.slice(i, i + splitCols));
      }

      // build table
      let html = "<div class='table-wrap'><table class='min-w-full border border-gray-300'>";
      html += "<thead><tr>";
      for (let c = 0; c < splitCols; c++) {
        html += `<th class='border px-2 py-1 sticky'>Column ${c+1}</th>`;
      }
      html += "</tr></thead><tbody>";
      rows.forEach(r => {
        html += "<tr>";
        for (let c = 0; c < splitCols; c++) {
          html += `<td class='border px-2 py-1'>${r[c] || ""}</td>`;
        }
        html += "</tr>";
      });
      html += "</tbody></table></div>";

      // show table preview
      byId("output").innerHTML = html;

      // put raw HTML code into textarea
      const plainHTML = html.replace(/ class='[^']*'/g, ""); // remove Tailwind classes for cleaner code
      byId("htmlCode").value = plainHTML;
    }

    // Copy button
    byId("copyBtn").addEventListener("click", () => {
      byId("htmlCode").select();
      document.execCommand("copy");
      alert("HTML code copied!");
    });

    // Hook render button
    byId("btnRender").addEventListener("click", render);
  </script>
</body>
</html>
